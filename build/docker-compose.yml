services:
  trex:
    build:
      context: ./services/trex
      dockerfile: build/Dockerfile
      target: development
    command: npm run watch
    ports:
      - 33000:33000
      - 8001:8001
    volumes:
      - ./services/trex/core:/usr/src/core
     # - ./services/trex/plugins:/usr/src/plugins
      - ./functions:/usr/src/plugins/d2ef
      - ./services/trex/package.json:/usr/src/package.json
    environment:
      LOCAL_DEBUG: "true"
      DATABASE_CREDENTIALS: ${DATABASE_CREDENTIALS}
      PLUGIN_BASE_PATH: "./plugins"